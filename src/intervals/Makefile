# Run ragel to regenerate parsers after updating the .rl source file

parsers=bed-parser.jl bigbed-parser.jl

all: ${parsers}

clean:
	rm -f ${parsers}

%.jl: %.rl
	ragel -Y --goto-backend -G2 $< -o $@.tmp
	echo "# WARNING: This file was generated from $< using ragel. Do not edit!" > $@
	sed 's/[[:space:]]*$$//g' $@.tmp >> $@
	rm $@.tmp

%.dot: %.rl
	ragel -p -V $< > $@

%.svg: %.dot
	dot -Tsvg < $< > $@
